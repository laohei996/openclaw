# Cities Skylines Assistant - 快速开始

## 5 分钟上手

### 1. 首次使用 - 捕获 UI 模板

在玩游戏之前,先捕获一些 UI 元素作为模板（方便自动化识别）:

```bash
python C:\Users\admin\openclaw\skills\cities-skylines\scripts\capture_templates.py
```

跟随引导,逐个截取游戏界面的按钮和图标。

**最少需要捕获**:

- 道路菜单图标
- 分区菜单图标
- 常用道路类型（2车道、4车道、6车道）
- 常用分区类型（住宅、商业、工业）

**提示**: 可以先捕获几个，后续再补充。

---

### 2. 开始游戏

打开 Cities Skylines，进入游戏。

---

### 3. 请求帮助

在 OpenClaw 聊天中:

**策略建议**:

```
"我刚开局，应该怎么规划道路？"
"帮我看看这个交叉口怎么优化"
"现在交通流量 55%，该怎么办？"
```

**自动化操作**:

```
"帮我建一条从屏幕中间到右边的 6 车道道路"
"自动划分一个 5x5 的住宅网格"
"帮我找到并点击道路菜单"
```

**分析截图**:

```
"帮我看看这张截图，有什么可以改进的？"
"分析一下我的城市布局"
```

---

## 主要功能

### 📖 策略指导

AI 助手内置了城市天际线的最佳实践:

- **开局策略** - 前 5000 人口怎么玩
- **道路层级** - 主干道/次干道/本地道路
- **分区原则** - 住宅/商业/工业怎么布局
- **交通优化** - 解决拥堵问题
- **预算管理** - 收支平衡

查看完整策略: `references/strategies.md`

---

### 🎮 游戏自动化

基于 `screen-control` skill，可以自动执行游戏操作:

**建造道路**:

```python
# 通过 AI 调用
"帮我从 (0.3, 0.4) 建一条 4 车道道路到 (0.7, 0.4)"
```

**划分区域**:

```python
"在 (0.3, 0.3) 到 (0.5, 0.5) 划分低密度住宅区"
```

**创建网格**:

```python
"在 (0.2, 0.3) 创建一个 5x5 的道路网格"
```

**放置建筑**:

```python
"在 (0.4, 0.5) 放置一个小学"
```

---

### 🧠 学习系统

AI 会从你的游戏中学习并改进策略:

**开始学习会话**:

```
"开始学习会话，目标是优化高速公路立交"
```

AI 会:

1. 截取初始状态
2. 记录你的操作
3. 监控城市数据
4. 分析结果
5. 更新策略

**查看学习成果**:

```
"显示最近的学习记录"
"有哪些新发现的策略？"
```

学习记录保存在: `references/learned_patterns.md`

---

### 🔍 截图分析

上传城市截图，AI 会分析:

```
"帮我看看这个布局有什么问题"
[上传截图]
```

AI 会识别:

- 道路结构
- 分区布局
- 潜在瓶颈
- 改进建议

---

## 典型使用流程

### 场景 1: 新手开局

1. **咨询策略**: "我是新手，开局应该怎么玩？"
2. **AI 提供**: 开局布局建议，优先级清单
3. **手动建设**: 按照建议建造初始城市
4. **遇到问题**: "为什么我的商业区一直缺货？"
5. **AI 诊断**: 分析原因，提供解决方案

---

### 场景 2: 交通优化

1. **发现问题**: 城市开始拥堵
2. **请求帮助**: "交通流量只有 60%，怎么办？"
3. **AI 分析**: 要求截图，分析瓶颈
4. **提供方案**: 具体改造建议（扩路、公交、立交）
5. **自动化**: "帮我在这里建一条地铁线"

---

### 场景 3: 学习新技巧

1. **设定目标**: "我想学习如何建立高效的工业区"
2. **AI 指导**: 提供工业区布局原则
3. **实践**: 你手动建造
4. **反馈**: AI 观察结果，给出改进意见
5. **总结**: AI 记录成功经验到知识库

---

## 配置选项

编辑 `config.json` 自定义:

```json
{
  "game": {
    "resolution": "3840x2160", // 你的分辨率
    "language": "chinese", // 游戏语言
    "dlc": [] // 已安装的 DLC
  },
  "automation": {
    "speed": "normal", // slow/normal/fast
    "confidence": 0.85, // 图像匹配置信度
    "pause_between_actions": 0.5 // 操作间隔（秒）
  }
}
```

---

## 进阶技巧

### 自定义模板

如果 AI 识别不到某个 UI 元素:

```bash
python scripts/capture_templates.py --mode quick --category ui_elements --name "新按钮"
```

### 批量操作

```
"帮我在网格的每个路口都放置路灯"
"自动沿着主干道两侧划分商业区"
```

### 组合 Skills

```
"用浏览器查一下这个建筑的最佳覆盖范围"
"把我的城市布局保存到 canvas"
```

---

## 常见问题

**Q: AI 点击的位置不对？**

- 重新捕获 UI 模板
- 检查分辨率设置
- 降低自动化速度

**Q: AI 找不到 UI 元素？**

- 确保游戏界面无遮挡
- 尝试用文字描述代替模板
- 调整 confidence 参数

**Q: 想要暂停自动化？**

- 鼠标移到屏幕左上角（pyautogui 安全机制）
- 按 Ctrl+C
- 说"停下"

---

## 资源

- **完整策略指南**: `references/strategies.md`
- **常见错误**: `references/mistakes.md`
- **学习记录**: `references/learned_patterns.md`
- **官方 Wiki**: https://skylines.paradoxwikis.com

---

**开始享受 AI 辅助的城市建设吧! 🏙️🖤**
